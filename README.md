Формат сжатия изображений без потерь. Сжатие потоковое, однопроходное. Поддерживается альфа канал. Почти всегда сжимает сильнее чем png.

Алгоритм подготовки потока:

Дельта кодирование пикселя от предыдущего или от верхнего или от предыдущего и верхнего. Выбирается лучший вариант

В красный и синий каналы записываются разница от зеленого канала

Для каждого канала, обрабатывается 8 вариантов алгоритмов сжатия, и выбирается лучший. Основных алгоритма два:

1. (H) Хаффман
2. (SH) Знак числа определяет переключение знака в потоке, Хаффман.

На эти два алгоритма накладываются вариации статистики для кодов Хаффмана:

1. Статистика по предыдущей строке
2. Статистика по всем предыдущим строкам

И поддержка rle. В итоге получается 8 вариантов алгоритма:

1. (H) Алгоритм Хаффмана, статистика по предыдущей строке
2. (HA) Алгоритм Хаффмана, статистика по всем предыдущим строкам
3. (SH) Минус числа определяет, переключение знака в потоке, алгоритм Хаффмана, статистика по предыдущей строке
4. (SHA) Минус числа определяет, переключение знака в потоке, алгоритм Хаффмана, по всем предыдущим строкам
5. (RH) Алгоритм Хаффмана, rle, статистика по предыдущей строке
6. (RHA) Алгоритм Хаффмана, rle, статистика по всем предыдущим строкам
7. (RSH) Минус числа определяет, переключение знака в потоке, rle, алгоритм Хаффмана, статистика по предыдущей строке
8. (RSHA) Минус числа определяет, переключение знака в потоке, rle, алгоритм Хаффмана, по всем предыдущим строкам


Rle, используется только для нулей. Занимает еще один код. Собирается статистика, учитывая размер кода нуля и размера кода rle (чтобы итоговый размер был меньше).
